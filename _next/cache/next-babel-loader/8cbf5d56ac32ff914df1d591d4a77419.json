{"ast":null,"code":"const pool = require('../../../lib/db');\n\nexport default (async (req, res) => {\n  try {\n    const desc = req.body; //res.setHeader('Content-Type', 'application/json')\n    // if(req.method==='POST'){\n\n    const post = desc !== '' ? await pool.query(`INSERT INTO contact (content, date) VALUES($1, to_timestamp(${Date.now()} / 1000.0))`, [desc]) : null; // } else {\n\n    const get = await pool.query(`SELECT * FROM contact`);\n    res.status(200).json(get.rows.map(item => ({\n      id: item.id,\n      date: item.date,\n      desc: JSON.parse(item.content)\n    })));\n    res.status(200).json(desc); // }\n  } catch (e) {\n    console.error(e);\n    res.status(500).end();\n  }\n});","map":{"version":3,"sources":["C:/Users/GBM/Desktop/ermire/src/pages/api/order-form.js"],"names":["pool","require","req","res","desc","body","post","query","Date","now","get","status","json","rows","map","item","id","date","JSON","parse","content","e","console","error","end"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,iBAAD,CAApB;;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,MAAI;AACA,UAAMC,IAAI,GAAGF,GAAG,CAACG,IAAjB,CADA,CAEA;AACA;;AACI,UAAMC,IAAI,GAAGF,IAAI,KAAK,EAAT,GAAc,MAAMJ,IAAI,CAACO,KAAL,CAAY,+DAA8DC,IAAI,CAACC,GAAL,EAAW,aAArF,EAAmG,CAACL,IAAD,CAAnG,CAApB,GAAiI,IAA9I,CAJJ,CAKA;;AACI,UAAMM,GAAG,GAAG,MAAMV,IAAI,CAACO,KAAL,CAAY,uBAAZ,CAAlB;AACAJ,IAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,GAAG,CAACG,IAAJ,CAASC,GAAT,CAAaC,IAAI,KAAK;AAACC,MAAAA,EAAE,EAAED,IAAI,CAACC,EAAV;AAAcC,MAAAA,IAAI,EAAEF,IAAI,CAACE,IAAzB;AAA+Bb,MAAAA,IAAI,EAAEc,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACK,OAAhB;AAArC,KAAL,CAAjB,CAArB;AACAjB,IAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBR,IAArB,EARJ,CASA;AACH,GAVD,CAUE,OAAOiB,CAAP,EAAU;AACRC,IAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACAlB,IAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBa,GAAhB;AACH;AACJ,CAfD","sourcesContent":["const pool = require('../../../lib/db');\r\n\r\nexport default async (req, res) => {\r\n    try {\r\n        const desc = req.body\r\n        //res.setHeader('Content-Type', 'application/json')\r\n        // if(req.method==='POST'){\r\n            const post = desc !== '' ? await pool.query(`INSERT INTO contact (content, date) VALUES($1, to_timestamp(${Date.now()} / 1000.0))`, [desc]) : null;\r\n        // } else {\r\n            const get = await pool.query(`SELECT * FROM contact`)\r\n            res.status(200).json(get.rows.map(item => ({id: item.id, date: item.date, desc: JSON.parse(item.content)})));\r\n            res.status(200).json(desc)\r\n        // }\r\n    } catch (e) {\r\n        console.error(e);\r\n        res.status(500).end();\r\n    }\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}