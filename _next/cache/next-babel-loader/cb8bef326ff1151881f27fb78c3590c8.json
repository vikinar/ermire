{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst pool = require('../../../lib/db');\n\nexport default (async (req, res) => {\n  try {\n    const desc = req.body;\n    const post = desc !== '' ? await pool.query(`INSERT INTO contact (description) VALUES($1)`, [desc]) : null;\n    const get = await pool.query(`SELECT * FROM contact`);\n    res.status(200).json(get.rows.map(item => {\n      const singleItem = _objectSpread({\n        id: item.todo_id\n      }, item.description);\n\n      return singleItem;\n    }));\n    res.status(200).json(desc);\n  } catch (e) {\n    console.error(e);\n    res.status(500).end();\n  }\n});","map":{"version":3,"sources":["C:/Users/afmed/Desktop/ermire/src/pages/api/order-form.js"],"names":["pool","require","req","res","desc","body","post","query","get","status","json","rows","map","item","singleItem","id","todo_id","description","e","console","error","end"],"mappings":";;;;;;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,iBAAD,CAApB;;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,MAAI;AACA,UAAMC,IAAI,GAAGF,GAAG,CAACG,IAAjB;AACI,UAAMC,IAAI,GAAGF,IAAI,KAAK,EAAT,GAAc,MAAMJ,IAAI,CAACO,KAAL,CAAY,8CAAZ,EAA2D,CAACH,IAAD,CAA3D,CAApB,GAAyF,IAAtG;AACA,UAAMI,GAAG,GAAG,MAAMR,IAAI,CAACO,KAAL,CAAY,uBAAZ,CAAlB;AACAJ,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,GAAG,CAACG,IAAJ,CAASC,GAAT,CAAaC,IAAI,IAAI;AACtC,YAAMC,UAAU;AACZC,QAAAA,EAAE,EAAEF,IAAI,CAACG;AADG,SAETH,IAAI,CAACI,WAFI,CAAhB;;AAIA,aAAOH,UAAP;AACH,KANoB,CAArB;AAOJX,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBN,IAArB;AACH,GAZD,CAYE,OAAOc,CAAP,EAAU;AACRC,IAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACAf,IAAAA,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBY,GAAhB;AACH;AACJ,CAjBD","sourcesContent":["const pool = require('../../../lib/db');\r\n\r\nexport default async (req, res) => {\r\n    try {\r\n        const desc = req.body\r\n            const post = desc !== '' ? await pool.query(`INSERT INTO contact (description) VALUES($1)`, [desc]) : null;\r\n            const get = await pool.query(`SELECT * FROM contact`)\r\n            res.status(200).json(get.rows.map(item => {\r\n                const singleItem = {\r\n                    id: item.todo_id,\r\n                    ...item.description\r\n                }\r\n                return singleItem\r\n            }));\r\n        res.status(200).json(desc)\r\n    } catch (e) {\r\n        console.error(e);\r\n        res.status(500).end();\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}