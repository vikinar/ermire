{"ast":null,"code":"const pool = require('../../../lib/db');\n\nexport default (async (req, res) => {\n  try {\n    const desc = req.body;\n\n    if (req.method = 'POST') {\n      desc !== '' ? await pool.query(`INSERT INTO contact (description) VALUES($1)`, [desc]) : null;\n      res.status(200).json(get.rows.map(item => ({\n        [item.todo_id]: item.description\n      })));\n    } else if (req.method = 'GET') {\n      const get = await pool.query(`SELECT * FROM contact`);\n      res.status(200).json(get.rows.map(item => ({\n        [item.todo_id]: item.description\n      })));\n      res.status(200).json(desc);\n    }\n  } catch (e) {\n    console.error(e);\n    res.status(500).end();\n  }\n});","map":{"version":3,"sources":["C:/Users/afmed/Desktop/ermire/src/pages/api/order-form.js"],"names":["pool","require","req","res","desc","body","method","query","status","json","get","rows","map","item","todo_id","description","e","console","error","end"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,iBAAD,CAApB;;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,MAAI;AACA,UAAMC,IAAI,GAAGF,GAAG,CAACG,IAAjB;;AACA,QAAGH,GAAG,CAACI,MAAJ,GAAa,MAAhB,EAAuB;AACnBF,MAAAA,IAAI,KAAK,EAAT,GAAc,MAAMJ,IAAI,CAACO,KAAL,CAAY,8CAAZ,EAA2D,CAACH,IAAD,CAA3D,CAApB,GAAyF,IAAzF;AACAD,MAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,GAAG,CAACC,IAAJ,CAASC,GAAT,CAAaC,IAAI,KAAK;AAAC,SAACA,IAAI,CAACC,OAAN,GAAgBD,IAAI,CAACE;AAAtB,OAAL,CAAjB,CAArB;AACH,KAHD,MAGM,IAAGb,GAAG,CAACI,MAAJ,GAAa,KAAhB,EAAsB;AACxB,YAAMI,GAAG,GAAG,MAAMV,IAAI,CAACO,KAAL,CAAY,uBAAZ,CAAlB;AACAJ,MAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,GAAG,CAACC,IAAJ,CAASC,GAAT,CAAaC,IAAI,KAAK;AAAC,SAACA,IAAI,CAACC,OAAN,GAAgBD,IAAI,CAACE;AAAtB,OAAL,CAAjB,CAArB;AACAZ,MAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBL,IAArB;AACH;AACJ,GAVD,CAUE,OAAOY,CAAP,EAAU;AACRC,IAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACAb,IAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBW,GAAhB;AACH;AACJ,CAfD","sourcesContent":["const pool = require('../../../lib/db');\r\n\r\nexport default async (req, res) => {\r\n    try {\r\n        const desc = req.body\r\n        if(req.method = 'POST'){\r\n            desc !== '' ? await pool.query(`INSERT INTO contact (description) VALUES($1)`, [desc]) : null;\r\n            res.status(200).json(get.rows.map(item => ({[item.todo_id]: item.description})));\r\n        }else if(req.method = 'GET'){\r\n            const get = await pool.query(`SELECT * FROM contact`)\r\n            res.status(200).json(get.rows.map(item => ({[item.todo_id]: item.description})));\r\n            res.status(200).json(desc)\r\n        }\r\n    } catch (e) {\r\n        console.error(e);\r\n        res.status(500).end();\r\n    }\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}